stages:
  - build
  - deploy

buildAndTest:
  image: rocker/tidyverse
  stage: build
  script:
    # Install system dependencies for rJava
    - apt-get update && apt-get -y install default-jre default-jdk
    # Install package dependencies
    - R -e 'install.packages(c("ape", "xlsx"))'
    # Testing
    - R -e "library(xlsx)"
    # Install pkgdown
    - R -e 'install.packages("pkgdown")'
    # Install package
    - make install
    # Build website
    - make pkgdown
  artifacts:
    paths:
      - docs

pages:
  stage: deploy
  script:
    - mv docs public
  artifacts:
    paths:
      - public
